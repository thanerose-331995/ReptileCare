<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>RepTool</title>
    <!-- ccs / materialise -->
    <link type="text/css" href="../css/materialize.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link type="text/css" href="../css/style.css" rel="stylesheet">
    <link type="text/css" href="../css/calendar.css" rel="stylesheet">
    <!-- js links -->
    <script type="text/javascript" src="../js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="../js/materialize.min.js"></script>
    <!-- link to manifest -->
    <link rel="manifest" href="../manifest.json">
    <meta name="theme-color" content="#FFE1C4">
</head>

<body>
    <!-- ------------ HEADER ------------ -->
    <nav class="top">
        <ul id="top-bar" class="center row text-green">
            <li class="col s3">
                <a href="./main.html" class="green-text text-darken-1">REP<span>TOOL</span></a>
            </li>
            <li class="col s9 right-align">
                <div id="logout">
                    <i style="padding: 0px" id="logout-btn"
                        class="btn-flat material-icons red-text text-darken-4">exit_to_app</i>
                </div>
            </li>
        </ul>
    </nav>
    <!-- ------------ MAIN CONTENT ------ -->
    <div class="page-content">
        <!-- -------- main page content -->
        <div class="container center grey lighten-3 z-depth-2" style="padding: 10px;margin-top: 30px;">
            <!-- -------- user profile data -->
            <div id="profile-content"></div>
            <div class="divider"></div>
            <!-- -------- calendar ----------->
            <div class="container">
                <h6><b>Upcoming Calendar</b></h6>
                <div class="divider"></div>
                <br>
                <div class="cal-head">
                    <h5 id="prev">
                        < </h5>
                            <div id="title"></div>
                            <h5 id="next">></h5>
                </div>
                <div class="calendar"></div>
                <br>
                <div class="row">
                    <div class="btn waves-effect col s3" id="go-today">Today</div>
                    <a id="add-event" class="waves-effect waves-light btn col s3 right"><i
                            class="material-icons">add</i></a>
                </div>
            </div>
        </div>
    </div>
    <!-- -------- new event form ----->
    <div id="new-event" style="display: none;">
        <div class="center container">
            <form class="center">
                <h4>New Event</h4>
                <div class="input-field">
                    <input id="event-title" type="text">
                    <label for="first_name">Event Title</label>
                </div>
                <div class="input-field">
                    <select id="tag">
                        <option value="" disabled selected>Select One</option>
                        <option value="1">Vet Appointment</option>
                        <option value="2">Feeding</option>
                        <option value="3">Cleaning</option>
                    </select>
                    <label>Tag</label>
                </div>
                <h6>Date</h6>
                <input id="datepicker" type="text" class="datepicker">
                <div class="row">
                    <div class="col s6">
                        <h6>Start Time</h6>
                        <input id="start-time" type="text" class="timepicker">
                    </div>
                    <div class="col s6">
                        <h6>End Time</h6>
                        <input id="end-time" type="text" class="timepicker">
                    </div>
                </div>
                <a id="submit" class="waves-effect waves-light btn"><i class="material-icons">send</i></a>
                <p id="event-err"></p>
            </form>
        </div>
    </div>
    <!-- --------event confirm ------->
    <div id="event-confirm" class="modal">
        <div class="modal-content center">
            <h4 id="e-title">New Event</h4>
            <div id="event-data"></div>
        </div>
        <div class="modal-footer">
            <a class="modal-close waves-effect waves-green btn-flat">Edit</a>
            <a id="confirm-submit" class="modal-close waves-effect waves-green btn-flat">Confirm</a>
        </div>
    </div>
    <!-- -------- event info --------->
    <div id="event-info" class="modal">
        <div class="modal-content center">
            <h4 id="e-info-title">New Event</h4>
            <div class="section" id="e-info-data"></div>
            <div class="divider"></div>
            <div class="section">
                <a id="edit-event-btn" class="waves-effect waves-light flat-btn right"><i
                        class="material-icons">edit</i></a>
                <a id="delete-event" class="waves-effect waves-light flat-btn right"><i
                        class="material-icons">delete</i></a>
            </div>

        </div>
    </div>
    <!-- -------- confirm delete ----->
    <div id="confirm-delete" class="modal">
        <div class="modal-content center">
            <h4 id="e-info-title">Delete this event?</h4>
        </div>
        <div class="modal-footer" style="padding: 0px 30%;">
            <a class="modal-close waves-effect waves-light btn left" onclick="deleteEvent()">Yes</a>
            <a class="modal-close waves-effect waves-light btn right">No</a>
        </div>
    </div>
    <!-- -------- edit event --------->
    <div id="edit-event" style="display: none;">
        <div class="center container">
            <form class="center">
                <h4>Edit Event</h4>
                <div class="input-field">
                    <input id="event-title" type="text">
                    <label for="first_name">Event Title</label>
                </div>
                <div class="input-field">
                    <select id="tag">
                        <option value="" disabled selected>Select One</option>
                        <option value="1">Vet Appointment</option>
                        <option value="2">Feeding</option>
                        <option value="3">Cleaning</option>
                    </select>
                    <label>Tag</label>
                </div>
                <h6>Date</h6>
                <input id="datepicker" type="text" class="datepicker">
                <div class="row">
                    <div class="col s6">
                        <h6>Start Time</h6>
                        <input id="start-time" type="text" class="timepicker">
                    </div>
                    <div class="col s6">
                        <h6>End Time</h6>
                        <input id="end-time" type="text" class="timepicker">
                    </div>
                </div>
                <a id="close-edit" class="waves-effect waves-light btn"><i class="material-icons">close</i></a>
                <a id="save-edit" class="waves-effect waves-light btn"><i class="material-icons">send</i></a>
            </form>
        </div>
    </div>
    <!-- ------------ FOOTER ------------ -->
    <div class="end grey lighten-3">
        <div class="container">
            <div class="row">
                <ul class="center">
                    <li class="col s3">
                        <a href="./main.html" class="btn-floating green waves-effect"><i
                                class="material-icons">home</i></a>
                    </li>
                    <li class="col s3">
                        <a href="./care-sheets.html" class="btn-floating green waves-effect"><i
                                class="material-icons">assignment</i></a>
                    </li>
                    <li class="col s3">
                        <a class="btn-floating green waves-effect"><i class="material-icons">chat_bubble</i></a>
                    </li>
                    <li class="col s3">
                        <a href="./profile.html" class="disabled btn-floating green waves-effect"><i
                                class="material-icons">account_circle</i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- ------------ SDK LINKS --------- -->
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-auth.js"></script>

    <!-- ------------ JS LINKS ---------- -->
    <script src="../js/calendar.js"></script>
    <script src="../js/app.js"></script>
    <script src="../js/db.js"></script>
    <script>
        $(document).ready(() => {
            $('.modal').modal();
            $('.datepicker').datepicker({
                format: 'yyyy-mm-dd'
            });
            $('.timepicker').timepicker();
            $('select').formSelect();
            const user = JSON.parse(sessionStorage.getItem("user"));
            getData("users", user.uid, (data) => {
                $("#profile-content").append(`<h4>${data.first_name} ${data.last_name}</h4><h6>Pets<h6><div id="pet-data" />`);
                db.collection("pets").where("user", "==", user.uid).get().then(snapshot => {
                    snapshot.forEach(doc => {
                        var html = `
                        <div style="background-color:red;">
                            <p>${doc.data().name}<p>
                            </div>
                        `;
                        $("#pet-data").append(html);
                    });
                })
            })
        });
    </script>
</body>

</html>